---
title: Swagger 설정
author: 이강운
date: 2021-12-02
category: Jekyll
layout: post
---

[1. 개요]
-------------

Spring에서 개발된 REST API를 자동 문서화 라이브러리 Swagger에 대한 설명이다.
Swagger는 Spring Rest doc과 더불어 대표적인 REST API 문서 라이브러리이다.
REST API는 개발자의 의도가 API를 이용하는 개발자에게 의도가 명확하게 전달해야한다.
군더더기 없이 개발을 진행하여도 이를 문서화 시켜 공개하면 API를 이용하는 개발자들은 API의 구조를 빠르게 이해할 수 있다. 하지만, 문서 작업은 또 하나의 자원을 낭비하게 된다. 본 문서는 Swagger를 통해 REST API 문서화를 진행한다.

[Swagger 공식홈페이지][1]에서 다양한 확인을 할 수 있다.



환경구성
-------------
Swagger를 구성하기 위한 사전 환경은 아래와 같다.<br>
> 자바 : Java 11<br>
> 스프링 : Springboot 2.5.x<br> 
> 빌드툴 : Gradle
> 기타라이브러리 : lombok, spring-security

적용
-------------
Swagger는 개발된 REST API 프로젝트에 Swagger 관련 설정을 추가하는 방식이다.<br>
따라서 문서에서는 학생 REST API를 예시로 설명을 진행하겠다.

***Step.01 학생 클래스 생성***
```java
@Data
@AllArgsConstructor
@NoArgsConstructor
public class Student {
    private String name;    // 이름
    private String cls;     // 반
    private int score;      // 점수
}
```

***Step.02 학생 저장데이터 생성***
```java
private static List<Student> students = List.of(
        new Student("Lee", "A", 78),
        new Student("Kim", "B", 94),
        new Student("Park", "C", 59),
        new Student("Hong", "A", 59),
        new Student("Byoen", "C", 59),
        new Student("Yu", "D", 83)
);
```
*> 저장데이터의 경우 간단한 테스트를 위해 In-Memory 형식으로 지정*<br><br>

***Step.03 학생 API 생성***
```java
@RestController
@RequestMapping("/api/student")
public class StudentController {
    private static List<Student> students = List.of(
            new Student("Lee", "A", 78),
            new Student("Kim", "B", 94),
            new Student("Park", "C", 59),
            new Student("Hong", "A", 59),
            new Student("Byoen", "C", 59),
            new Student("Yu", "D", 83)
    );

    @GetMapping("/getAllStudent")
    public List<Student> getStudents() {
        return students;
    }

    @GetMapping("/{name}")
    public Student getStudent(@PathVariable("name") String name) {
        return students.stream()
                .filter(x -> x.getName().equalsIgnoreCase(name))
                .collect(Collectors.toList()).get(0);
    }

    @PatchMapping("/{name}")
    public ResponseEntity modifyStudent(@PathVariable("name") String name, @RequestBody Student student) {
        Student nameOfStudent = students.stream()
                .filter(s -> name.equals(s.getName()))
                .findFirst()
                .orElseThrow(RuntimeException::new);

        nameOfStudent.setCls(student.getCls());
        nameOfStudent.setScore(student.getScore());

        return new ResponseEntity(nameOfStudent, HttpStatus.OK);
    }

    @DeleteMapping("/{name}")
    public ResponseEntity deleteStudent(@PathVariable("name") String name) {
        boolean isDeleted = students.removeIf(s -> name.equals(s.getName()));

        return isDeleted ? new ResponseEntity(String.format("%s 삭제성공", name), HttpStatus.OK)
                    : new ResponseEntity("삭제 실패", HttpStatus.BAD_REQUEST);
    }

    @GetMapping("/byClass/{cls}")
    public ResponseEntity getStudentByClass(@PathVariable("cls") String cls) {
        List<Student> studentsbyClass = students.stream()
                .filter(x -> x.getCls().equalsIgnoreCase(cls))
                .collect(Collectors.toList());

        return new ResponseEntity(studentsbyClass, HttpStatus.OK);
    }
}
```
*[각각 전체조회], [이름으로 조회], [정보변경], [학생정보 삭제], [수업명으로 조회]를 의미한다*<br><br>

***Step.04 API 통신 확인***

![학생 전체 조회](/assets/images/_posts/swagger/result.png)

참고
-------------
[Swagger Official Site][1] <br>
[Baeldung - Setting Up Swagger 2 with a Spring REST API][2] <br>

[1]: https://swagger.io/tools/swagger-ui/
[2]: https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api